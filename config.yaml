# MAVLink / PX4
connection_url: "udp://:14540"  # PX4 SITL default. For USB Pixhawk on Pi/Mac: "serial:///dev/ttyACM0:57600"
takeoff_altitude_m: 5.0
max_flight_minutes: 2.0

# Imaging
photo_dir: "./data/shots"
log_csv: "./logs/shots.csv"
use_webcam: true            # true = laptop webcam; false = skip camera (use placeholder)
webcam_index: 0
save_full_res: true

# Duplicate detection
phash_size: 16             # perceptual hash size (16 -> 256-bit)
phash_threshold: 12
pos_radius_m: 1.0
angle_threshold_deg: 7.0
sharpness_replace_delta: 10.0

# NBV Planner (relative to home)
nbv:
  radii_m: [3, 6, 10]
  heights_m: [0.0, 1.5, 3.0]
  azimuth_steps: 12
  min_move_m: 2.0

# Safety
battery_min_v: 14.0        # ignored in SITL, used later on real hardware

# POI (optional; if null, POI = home)
poi:
  lat: null
  lon: null
  alt: null

agent:
  dup_streak_threshold: 3      # if we get N duplicates in a row, force a bigger move
  low_sharpness_threshold: 80  # if last kept sharpness below this, retake or adjust
  alt_step_m: 1.5              # altitude bump per “raise altitude” action
  max_alt_m: 25.0              # cap altitude
  radius_scale: 1.35           # multiply candidate radii when stuck
  retake_pitch_delta_deg: -4.0 # tweak gimbal pitch for a retake
